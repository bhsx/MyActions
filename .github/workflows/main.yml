# This is a basic workflow to help you get started with Actions

name: signInWoDeQianDao

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node: [ 12 ]
    name: Node ${{ matrix.node }} sample
    steps:
      - uses: actions/checkout@v3
      - name: Setup node
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node }}
      - run: node app.js 
      - name: Checkin
        run: |
          user='${{ secrets.USER }}'
          pwd='${{ secrets.PWD }}'

          user_list=()
          pwd_list=()
          IFS=" "
          for u in ${user[*]}
          do
          user_list[${#user_list[*]}]=${u}
          done
          for p in ${pwd[*]}
          do
          pwd_list[${#pwd_list[*]}]=${p}
          done
          user_num=${#user_list[*]}
          pwd_num=${#pwd_list[*]}
          if [ $user_num != $pwd_num ];then
          echo "账号和密码个数不对应"
          exit 1
          else
          echo "共有 $user_num 个账号，即将开始签到"
          fi
          for ((i=0;i<$user_num;i++))
          do
          # python3 C189Checkin.py <<EOF 
          echo ${user_list[$i]} 
          echo ${pwd_list[$i]}
          #EOF
          done
        # Runs a single command using the runners shell
